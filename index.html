<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ARXADS OS | V15.0</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap');
        body { background-color: #000; color: #fff; font-family: 'Inter', sans-serif; }
        .text-gold { color: #FFD700; }
        .btn-gold { background-color: #FFD700; color: #000; font-weight: 900; }
        .input-dark { background: #0a0a0a; border: 1px solid #222; color: #fff; padding: 10px; border-radius: 8px; width: 100%; }
        
        /* Menu Responsivo */
        #mainDashboard { display: none; height: 100vh; flex-direction: column; }
        @media (min-width: 1024px) { #mainDashboard { flex-direction: row; } }

        aside { width: 100%; background: #050505; border-bottom: 1px solid #111; overflow-x: auto; flex-shrink: 0; }
        @media (min-width: 1024px) { aside { width: 250px; height: 100vh; border-right: 1px solid #111; border-bottom: none; } }

        .nav-link { padding: 15px 20px; font-size: 11px; font-weight: bold; text-transform: uppercase; cursor: pointer; color: #444; white-space: nowrap; }
        .nav-link.active { color: #FFD700; background: #0a0a0a; border-left: 3px solid #FFD700; }
        @media (max-width: 1023px) { .nav-link.active { border-left: none; border-bottom: 3px solid #FFD700; } }

        main { flex: 1; overflow-y: auto; padding: 20px; }
        .card { background: #050505; border: 1px solid #111; border-radius: 12px; padding: 20px; }
    </style>
</head>
<body class="bg-black">

    <div id="loginScreen" class="fixed inset-0 bg-black flex items-center justify-center z-[9999]">
        <div class="w-full max-w-xs text-center p-8 border border-zinc-900 rounded-[40px] bg-zinc-950">
            <h1 class="text-4xl font-black text-gold italic mb-8">ARXADS</h1>
            <input type="password" id="pass" class="input-dark text-center mb-4" placeholder="Senha Master">
            <button onclick="login()" class="btn-gold w-full py-4 rounded-xl uppercase text-xs tracking-widest">Acessar Painel</button>
        </div>
    </div>

    <div id="mainDashboard">
        <aside class="flex lg:flex-col">
            <div class="p-6 text-gold font-black italic text-xl hidden lg:block">ARXADS OS</div>
            <nav class="flex lg:flex-col flex-1">
                <div onclick="tab('crm')" id="t-crm" class="nav-link active">üìÖ Agendamentos</div>
                <div onclick="tab('bi')" id="t-bi" class="nav-link">üìä Gr√°ficos (BI)</div>
                <div onclick="tab('scripts')" id="t-scripts" class="nav-link">üìù Scripts</div>
                <div onclick="tab('rank')" id="t-rank" class="nav-link">üèÜ Rankings</div>
            </nav>
        </aside>

        <main>
            <section id="sec-crm" class="space-y-6">
                <div class="flex justify-between items-center">
                    <h2 class="text-xl font-black uppercase text-gold">Agendamentos</h2>
                    <span class="text-[10px] text-zinc-600">Total: <span id="countLeads">0</span></span>
                </div>

                <div class="card grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-3">
                    <input type="text" id="lName" placeholder="Cliente" class="input-dark">
                    <input type="text" id="lNicho" placeholder="Nicho" class="input-dark">
                    <input type="text" id="lProt" placeholder="Prot." class="input-dark font-mono">
                    <select id="lStatus" class="input-dark">
                        <option value="AGENDADO">AGENDADO</option>
                        <option value="FECHOU">FECHOU ‚úÖ</option>
                        <option value="PERDIDO">PERDIDO ‚ùå</option>
                    </select>
                    <button onclick="addLead()" class="btn-gold rounded-lg py-2 uppercase text-[10px]">Salvar</button>
                </div>

                <div class="overflow-x-auto">
                    <table class="w-full text-left text-xs">
                        <thead class="bg-zinc-900 text-zinc-500 uppercase">
                            <tr>
                                <th class="p-4">Cliente</th>
                                <th class="p-4">Status Com.</th>
                                <th class="p-4">Reuni√£o</th>
                                <th class="p-4">A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody id="crmTable"></tbody>
                    </table>
                </div>
            </section>

            <section id="sec-bi" class="hidden space-y-8">
                <h2 class="text-xl font-black uppercase text-gold">Business Intelligence</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div class="card">
                        <h3 class="text-zinc-500 text-[10px] uppercase mb-4">Situa√ß√£o das Reuni√µes (No-Show vs Realizada)</h3>
                        <canvas id="chartReuniao"></canvas>
                    </div>
                    <div class="card">
                        <h3 class="text-zinc-500 text-[10px] uppercase mb-4">Efici√™ncia de Fechamento (%)</h3>
                        <canvas id="chartFechamento"></canvas>
                    </div>
                </div>
            </section>

            <section id="sec-scripts" class="hidden">
                 <h2 class="text-xl font-black uppercase text-gold mb-6">Scripts de Prospec√ß√£o</h2>
                 <p class="text-zinc-500 text-xs">Use a l√≥gica de headline e SPC enviada anteriormente.</p>
            </section>
        </main>
    </div>

    <script>
        let leads = JSON.parse(localStorage.getItem('arx_v15_db') || '[]');
        let chart1, chart2;

        function login() {
            if(document.getElementById('pass').value === "admin777") {
                document.getElementById('loginScreen').style.display = 'none';
                document.getElementById('mainDashboard').style.display = 'flex';
                render();
            }
        }

        function tab(name) {
            document.querySelectorAll('main section').forEach(s => s.classList.add('hidden'));
            document.getElementById('sec-' + name).classList.remove('hidden');
            document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
            document.getElementById('t-' + name).classList.add('active');
            if(name === 'bi') renderBI();
        }

        function addLead() {
            const l = {
                id: Date.now(),
                nome: document.getElementById('lName').value,
                nicho: document.getElementById('lNicho').value,
                prot: document.getElementById('lProt').value,
                statusComercial: document.getElementById('lStatus').value,
                statusReuniao: 'Pendente' // Pendente, Realizada, No-Show, Reagendada
            };
            if(!l.nome || !l.prot) return alert("Preencha Nome e Protocolo");
            leads.unshift(l);
            save();
        }

        function updateStatus(id, campo, valor) {
            const idx = leads.findIndex(x => x.id === id);
            leads[idx][campo] = valor;
            save();
        }

        function deleteLead(id) {
            if(confirm("Deseja excluir este lead permanentemente?")) {
                leads = leads.filter(x => x.id !== id);
                save();
            }
        }

        function save() {
            localStorage.setItem('arx_v15_db', JSON.stringify(leads));
            render();
        }

        function render() {
            document.getElementById('countLeads').innerText = leads.length;
            const html = leads.map(l => `
                <tr class="border-b border-zinc-900">
                    <td class="p-4">
                        <div class="font-bold uppercase text-white">${l.nome}</div>
                        <div class="text-[9px] text-zinc-600">${l.nicho} | ${l.prot}</div>
                    </td>
                    <td class="p-4">
                        <select onchange="updateStatus(${l.id}, 'statusComercial', this.value)" class="bg-black text-[10px] text-zinc-400 border border-zinc-800 p-1 rounded">
                            <option value="AGENDADO" ${l.statusComercial==='AGENDADO'?'selected':''}>AGENDADO</option>
                            <option value="FECHOU" ${l.statusComercial==='FECHOU'?'selected':''}>FECHOU ‚úÖ</option>
                            <option value="PERDIDO" ${l.statusComercial==='PERDIDO'?'selected':''}>PERDIDO ‚ùå</option>
                        </select>
                    </td>
                    <td class="p-4">
                        <select onchange="updateStatus(${l.id}, 'statusReuniao', this.value)" class="bg-black text-[10px] text-gold border border-zinc-800 p-1 rounded">
                            <option value="Pendente" ${l.statusReuniao==='Pendente'?'selected':''}>‚è≥ Pendente</option>
                            <option value="Realizada" ${l.statusReuniao==='Realizada'?'selected':''}>‚úÖ Realizada</option>
                            <option value="No-Show" ${l.statusReuniao==='No-Show'?'selected':''}>‚ùå No-Show</option>
                        </select>
                    </td>
                    <td class="p-4">
                        <button onclick="deleteLead(${l.id})" class="text-red-800 font-bold hover:text-red-500 text-[10px]">EXCLUIR</button>
                    </td>
                </tr>
            `).join('');
            document.getElementById('crmTable').innerHTML = html;
        }

        function renderBI() {
            const total = leads.length;
            const realizadas = leads.filter(l => l.statusReuniao === 'Realizada').length;
            const noShows = leads.filter(l => l.statusReuniao === 'No-Show').length;
            const fechamentos = leads.filter(l => l.statusComercial === 'FECHOU').length;
            const perdidos = leads.filter(l => l.statusComercial === 'PERDIDO').length;

            if(chart1) chart1.destroy();
            if(chart2) chart2.destroy();

            // Gr√°fico 1: Reuni√µes
            chart1 = new Chart(document.getElementById('chartReuniao'), {
                type: 'bar',
                data: {
                    labels: ['Realizadas', 'No-Show'],
                    datasets: [{
                        label: 'Quantidade',
                        data: [realizadas, noShows],
                        backgroundColor: ['#FFD700', '#333']
                    }]
                },
                options: { scales: { y: { beginAtZero: true } } }
            });

            // Gr√°fico 2: Fechamentos %
            chart2 = new Chart(document.getElementById('chartFechamento'), {
                type: 'doughnut',
                data: {
                    labels: ['Fechamentos', 'N√£o Fechados'],
                    datasets: [{
                        data: [fechamentos, total - fechamentos],
                        backgroundColor: ['#22c55e', '#111'],
                        borderColor: '#000'
                    }]
                }
            });
        }
    </script>
</body>
</html>